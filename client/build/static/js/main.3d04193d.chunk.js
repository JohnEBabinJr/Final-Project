(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(t,e,a){t.exports=a.p+"static/media/spotify-icon.daf13776.png"},32:function(t,e,a){t.exports=a(70)},38:function(t,e,a){},41:function(t,e,a){},42:function(t,e,a){},43:function(t,e,a){},70:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),i=a(4),r=a.n(i),o=(a(38),a(28)),c=a(5),l=a(6),m=a(8),p=a(7),u=a(9),h=a(2),d=a(12);a(16).config();var f=["user-top-read","user-read-currently-playing","user-read-playback-state","streaming","playlist-modify-public"];a(16).config();var g=["user-top-read","user-read-currently-playing","user-read-playback-state","playlist-modify-public"],b=(a(41),window.location.hash.substring(1).split("&").reduce(function(t,e){if(e){var a=e.split("=");t[a[0]]=decodeURIComponent(a[1])}return t},{}));window.location.hash="";var k=b,y=a(29),v=a.n(y),E=(a(42),function(t){var e={backgroundImage:"url(".concat(t.item.album.images[0].url,")")},a={width:100*t.progress_ms/t.item.duration_ms+"%"};return n.a.createElement("div",{className:"Test"},n.a.createElement("div",{className:"main-wrapper"},n.a.createElement("div",{className:"now-playing__img"},n.a.createElement("img",{src:t.item.album.images[0].url})),n.a.createElement("div",{className:"now-playing__side"},n.a.createElement("div",{className:"now-playing__name"},t.item.name),n.a.createElement("div",{className:"now-playing__artist"},t.item.artists[0].name),n.a.createElement("div",{className:"now-playing__status"},t.is_playing?"Playing":"Paused"),n.a.createElement("div",{className:"progress"},n.a.createElement("div",{className:"progress__bar",style:a}))),n.a.createElement("div",{className:"background",style:e})," "))}),A=(a(43),a(30)),_=a.n(A),O=a(14),w=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(m.a)(this,Object(p.a)(e).call(this))).state={modalIsOpen:!1},t.openModal=t.openModal.bind(Object(h.a)(Object(h.a)(t))),t.afterOpenModal=t.afterOpenModal.bind(Object(h.a)(Object(h.a)(t))),t.closeModal=t.closeModal.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(e,t),Object(l.a)(e,[{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"afterOpenModal",value:function(){}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(O.a,{onClick:this.openModal},"create ur room"),n.a.createElement(_.a,{isOpen:this.state.modalIsOpen,onAfterOpen:this.afterOpenModal,onRequestClose:this.closeModal,className:"Modal",overlayClassName:"Overlay",contentLabel:"Example Modal"},n.a.createElement(O.a,{id:"close",onClick:this.closeModal},n.a.createElement("i",{class:"fas fa-window-close"})),n.a.createElement("div",{className:"content"},n.a.createElement("p",null,"Let's get you started. Enter a nickname for yourself."),n.a.createElement("form",{class:"form-inline"},n.a.createElement("div",{class:"form-group mb-2"},n.a.createElement("label",{for:"nickname",class:"sr-only"},"nickname"),n.a.createElement("input",{type:"text",readonly:!0,class:"form-control-plaintext",id:"nickname",value:"email@example.com"})),n.a.createElement("button",{type:"submit",class:"btn btn-primary mb-2",id:"submitNickname"},n.a.createElement("i",{class:"fas fa-play-circle fa-1x"}))))))}}]),e}(n.a.Component),T=a(3),j=a.n(T),N={getTracks:function(){return j.a.get("/api/tracks")},getTracksById:function(t){return j.a.get("/api/tracks/"+t)},getTracksByRoomId:function(t){return j.a.get("/api/tracks/"+t)},deleteTracks:function(t){return j.a.delete("/api/tracks/"+t)},saveTrack:function(t){return j.a.post("/api/tracks",t)}},C=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(m.a)(this,Object(p.a)(e).call(this))).getStuffFromDB=function(){N.getTracks({}).then(function(t){return console.log("DB: "+t)}),N.getTracksById("/objectid/5dccc5c69ff432534eb5157c").then(function(t){return console.log(t)}),N.getTracksByRoomId("1").then(function(t){return console.log(t)})},t.makeRoom=function(){var e;if(t.state.room)return e=t.state.room;for(var a=[],s=0;s<4;s++)a.push(Math.floor(Math.random()*Math.floor(10)));return e=a.join(""),console.log(e),t.setState({room:e}),e},t.handleInputChange=function(e){var a=e.target,s=a.name,n=a.value;t.setState(Object(o.a)({},s,n))},t.handleFormSubmit=function(e){e.preventDefault(),t.getSong(t.state.token)},t.state={room:"",username:"",tempTrack:"",tempArtist:"",tempAlbum:"",token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0},t.getCurrentlyPlaying=t.getCurrentlyPlaying.bind(Object(h.a)(Object(h.a)(t))),t}return Object(u.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=k.access_token;t&&(this.setState({token:t}),this.getStuffFromDB())}},{key:"getCurrentlyPlaying",value:function(t){var e=this;d.ajax({url:"https://api.spotify.com/v1/me/player",type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)},success:function(t){console.log("data",t),e.setState({item:t.item,is_playing:t.is_playing,progress_ms:t.progress_ms})}})}},{key:"getSong",value:function(t){var e=this,a="";this.state.tempTrack&&this.state.tempArtist&&this.state.tempAlbum?a="https://api.spotify.com/v1/search?q=".concat(this.state.tempTrack,"&type=track&artist=").concat(this.state.tempArtist,"&album=").concat(this.state.tempAlbum,"&offset=0&limit=1"):this.state.tempTrack&&this.state.tempArtist&&!this.state.tempAlbum?a="https://api.spotify.com/v1/search?q=".concat(this.state.tempTrack,"&type=track&artist=").concat(this.state.tempArtist,"&offset=0&limit=1"):this.state.tempTrack&&!this.state.tempArtist&&this.state.tempAlbum?a="https://api.spotify.com/v1/search?q=".concat(this.state.tempTrack,"&type=track&album=").concat(this.state.tempAlbum,"&offset=0&limit=1"):!this.state.tempTrack&&this.state.tempArtist&&this.state.tempAlbum?a="https://api.spotify.com/v1/search?type=track&artist=".concat(this.state.tempArtist,"&album=").concat(this.state.tempAlbum,"&offset=0&limit=1"):!this.state.tempTrack||this.state.tempArtist||this.state.tempAlbum?this.state.tempTrack||!this.state.tempArtist||this.state.tempAlbum?this.state.tempTrack||this.state.tempArtist||!this.state.tempAlbum?alert("Must enter at least one value!"):a="https://api.spotify.com/v1/search?type=track&album=".concat(this.state.tempAlbum,"&offset=0&limit=1"):a="https://api.spotify.com/v1/search?type=track&artist=".concat(this.state.tempArtist,"&offset=0&limit=1"):a="https://api.spotify.com/v1/search?q=".concat(this.state.tempTrack,"&type=track&offset=0&limit=1"),d.ajax({url:a,type:"GET",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+t)},success:function(t){console.log("data",t),e.setState({item:t.tracks.items[0],is_playing:t.is_playing,progress_ms:t.progress_ms}),e.handleTrack(t)}})}},{key:"handleTrack",value:function(t){console.log("handletrack"),N.saveTrack({roomId:this.makeRoom(),trackId:t.tracks.items[0].id,trackName:t.tracks.items[0].name,artistName:t.tracks.items[0].artists[0].name,albumName:t.tracks.items[0].album.name,albumCover:t.tracks.items[0].album.images[1].url,userName:"Connor"}).then(function(t){return console.log("result:"+t)})}},{key:"render",value:function(){var t=n.a.createElement("a",{href:"https://github.com/JohnEBabinJr/final-project/",class:"mr-1"},n.a.createElement("i",{class:"fab fa-github fa-1x"})),e=n.a.createElement("a",{href:"/about",class:"ml-2"},"About Us"),a=n.a.createElement("a",{href:"/"},n.a.createElement("i",{class:"fas fa-home"}));return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"home"},n.a.createElement("a",{style:{float:"left",marginLeft:"10px"}},a)),n.a.createElement("div",{className:"links"},t," | ",e),n.a.createElement("header",{className:"App-header"},this.state.token&&n.a.createElement("form",null,n.a.createElement("input",{type:"text",placeholder:"Track",name:"tempTrack",value:this.state.tempTrack,onChange:this.handleInputChange}),n.a.createElement("input",{type:"text",placeholder:"Artist",name:"tempArtist",value:this.state.tempArtist,onChange:this.handleInputChange}),n.a.createElement("input",{type:"text",placeholder:"Album",name:"tempAlbum",value:this.state.tempAlbum,onChange:this.handleInputChange}),n.a.createElement("button",{onClick:this.handleFormSubmit},"Submit")),!this.state.token&&n.a.createElement("div",{class:"container"},n.a.createElement("img",{src:v.a,className:"App-logo",alt:"logo"}),n.a.createElement("div",{class:"row"},n.a.createElement("div",{class:"col col-5 mx-auto",id:"app"},n.a.createElement("p",{class:"lead mx-3"},"Collaborate on the ultimate roadtrip playlist with your friends using Spotify. Share the link, queue up songs, and export your playlist to relive the memories.")))),!this.state.token&&n.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("749b6ea423c24fef905f41108b8c3a3f","&redirect_uri=").concat("http://localhost:3000/","&scope=").concat(f.join("%20"),"&response_type=token&show_dialog=true")},"Host"),!this.state.token&&n.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("749b6ea423c24fef905f41108b8c3a3f","&redirect_uri=").concat("http://localhost:3000/","&scope=").concat(g.join("%20"),"&response_type=token&show_dialog=true")},"Guest"),this.state.token&&n.a.createElement(w,null),this.state.token&&n.a.createElement(E,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.progress_ms})))}}]),e}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console.log("made it here"),r.a.render(n.a.createElement(C,null),document.getElementById("root")),console.log("should be calling app"),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.3d04193d.chunk.js.map